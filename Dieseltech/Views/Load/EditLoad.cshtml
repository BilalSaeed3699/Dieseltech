@using Dieseltech.Models;

@{
    ViewBag.Title = "Broker";

    List<tblLoadHead> list = (List<tblLoadHead>)ViewBag.LoadInformation;
    List<tblLoadPickupDelivery> listPickDelivery = (List<tblLoadPickupDelivery>)ViewBag.LoadPickupDelivery;
    List<tblLoadCharge1> listLoadCharge = (List<tblLoadCharge1>)ViewBag.LoadCharges;

    List<tblLoadFilePath> listLoadDocument = (List<tblLoadFilePath>)ViewBag.LoadDocuments;
}
<head>

    <style>
        .nav-tabs.nav-tabs-solid > li > a.active, .nav-tabs.nav-tabs-solid > li > a.active:hover, .nav-tabs.nav-tabs-solid > li > a.active:focus {
            background-color: #009efb;
            border-color: #009efb;
        }

        th {
            background-color: white;
            color: black;
        }
        .select2-container {
        width:100% !important;
        }
    </style>
</head>

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <br />
            <h3 name="LoaderNumber"> Load Number: @list[0].LoaderNumber</h3>

            @{string LoaderNumber = list[0].LoaderNumber;}

            @*Set dropdown value in variable*@
            @{Int32 BrokerId = Convert.ToInt32(list[0].BrokerId);}
            @{Int32 BrokerHelperId = 0;}
            @{Int32 CompanyId = Convert.ToInt32(list[0].CompanyId);}
            @{Int32 CarrierId = Convert.ToInt32(list[0].CarrierId);}
            @{Int32 CarrierHelperId =0;}
            @{Int32 LoadTypeId = Convert.ToInt32(list[0].LoadTypeId);}
            @{Int32 LoadSubTypeId = Convert.ToInt32(list[0].LoadSubTypeId);}
            @{Int32 QuantityTypeId = Convert.ToInt32(list[0].QuantityTypeId);}
            @{Int32 DriverTypeId = Convert.ToInt32(list[0].DriverTypeId);}
            @{Int32 TruckId = Convert.ToInt32(list[0].TruckId);}

        </div>


    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="card-box">
                <!-- Nav tabs -->
                @*<ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active"><a href="#Section1" aria-controls="home" role="tab" data-toggle="tab">General</a></li>
                        <li role="presentation"><a href="#Section2" aria-controls="profile" role="tab" data-toggle="tab">Pickup And Delivery</a></li>
                        <li role="presentation"><a href="#Section3" aria-controls="messages" role="tab" data-toggle="tab">Charges</a></li>
                        <li role="presentation"><a href="#Section4" aria-controls="messages" role="tab" data-toggle="tab">Text Message</a></li>
                    </ul>*@

                <ul class="nav nav-tabs nav-tabs-solid">
                    <li class="nav-item"><a class="nav-link active" href="#Section1" data-toggle="tab">General</a></li>
                    <li class="nav-item"><a class="nav-link" href="#Section2" data-toggle="tab">Pickup And Delivery</a></li>
                    <li class="nav-item"><a class="nav-link" href="#Section3" data-toggle="tab">Text Messages</a></li>
                    <li class="nav-item"><a class="nav-link" href="#Charges" data-toggle="tab">Charges</a></li>
                </ul>


                <!-- Tab panes -->
                <div class="tab-content tabs">

                    <div role="tabpanel" class="tab-pane show active" id="Section1">

                        @using (Html.BeginForm("UpdateLoad", "Load", FormMethod.Post))
                        {
                            @Html.AntiForgeryToken()
                            <form>
                                <div class="row">


                                    <div class="col-md-6">
                                        @*<h3 name="LoaderNumber">@list[0].LoaderNumber</h3>*@

                                        <input type="number" hidden value="@list[0].LoaderNumber" name="LoaderNumber" class="form-control" required>

                                        <div class="card-box shadow-none p-3 mb-5 bg-light rounded">
                                            <h4 class="card-title">Broker</h4>

                                            @*<div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h2 id="LoderBrokerIds"></h2>
                                                    </div>
                                                </div>
                                            </div>*@



                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Broker Search</label>
                                                        <select id="Brokerid" required name="Brokerid" onchange="SelectedIndexChanged(this,'B')" class="form-control js-example-basic-single">
                                                            <option value="0">Select Broker Name</option>
                                                            @foreach (var item in ViewBag.broker)
                                                            {

                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>
                                                                </text>

                                                            }

                                                        </select>




                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Broker Helper</label>


                                                        <select id="BrokerHelperid" required name="BrokerHelperid" onchange="SelectedIndexChanged(this,'BH')"
                                                                class="form-control js-example-basic-single">
                                                            <option value="0">Select Broker Helper</option>
                                                            @foreach (var item in ViewBag.BrokerHelper)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>


                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Company</label>

                                                        <select id="CompanyId" required name="CompanyId" class="form-control js-example-basic-single">
                                                            <option value="0">Select Company </option>
                                                            @foreach (var item in ViewBag.Company)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>



                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Broker Rate</label>
                                                        <input type="number" value="@list[0].BrokerRate" name="BrokerRate" class="form-control" required>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Contact Name</label>
                                                        <input type="text" name="ContactName"  class="form-control" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Email</label>
                                                        <input type="email" name="ContactEmail" value="" class="form-control" required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Phone</label>
                                                        <input type="text" maxlength="8" name="ContactPhone" class="form-control" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Ext.</label>
                                                        <input type="text" name="Extension" value="@list[0].Extension" class="form-control" required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Reference</label>
                                                        <input type="text" name="BrokerReference" value="@list[0].BrokerReference" class="form-control" required>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Registration Date</label>
                                                        <input type="datetime" value="@list[0].RegistrationDate" name="RegistrationDate" class="form-control" required>
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card-box shadow-none p-3 mb-5 bg-light rounded">
                                            <h4 class="card-title">Carrier</h4>

                                            @*<div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <h2 id="lblCarrier"> </h2>
                                                    </div>
                                                </div>
                                            </div>*@

                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Carrier Search</label>

                                                        <select id="CarrierId" required name="CarrierId" onchange="SelectedIndexChanged(this,'C')"
                                                                class="form-control js-example-basic-single">
                                                            <option value="0">Select Carrier </option>
                                                            @foreach (var item in ViewBag.Carrier)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Carrier Helper</label>



                                                        <select id="CarrierHelperId" required name="CarrierHelperId" onchange="SelectedIndexChanged(this,'CH')"
                                                                class="form-control js-example-basic-single">
                                                            <option value="0">Select Carrier  Helper</option>
                                                            @foreach (var item in ViewBag.CarrierHelper)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>


                                                    </div>

                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <label>Carrier Rate</label>
                                                        <input type="text" value="@list[0].CarrierRate" name="CarrierRate" class="form-control" required>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Number to Text</label>
                                                        <input type="text" name="NumberToText" value="@list[0].NumberToText" class="form-control" required>
                                                    </div>
                                                    <div class="col-md-4">

                                                        <input type="checkbox" id="chkIsSendText" value="@list[0].IsSendText" name="checkbox">
                                                        <label>Send Text</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label>Load Type</label>

                                                        <select id="LoadTypeId" required name="LoadTypeId" class="form-control js-example-basic-single">
                                                            <option value="0">Select Load Type </option>
                                                            @foreach (var item in ViewBag.LoadType)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>

                                                    </div>
                                                    <div class="col-md-6">
                                                        <label>Commodity</label>
                                                        <input type="text" name="Commodity" value="@list[0].Commodity" class="form-control" required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Truck </label>

                                                        <select id="TruckId" required name="TruckId" class="form-control js-example-basic-single">
                                                            <option value="0">Select Truck </option>
                                                            @foreach (var item in ViewBag.Truck)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>


                                                    </div>
                                                </div>

                                            </div>

                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <label>Full/Partial</label>
                                                        <select id="LoadSubTypeId" required name="LoadSubTypeId" class="form-control js-example-basic-single">
                                                            <option value="0">Select Load Type </option>
                                                            @foreach (var item in ViewBag.LoadSubType)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>

                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Available</label>
                                                        <input type="text" name="Available" value="@list[0].Available" class="form-control" required>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Weight</label>
                                                        <input type="text" name="Weight" value="@list[0].Weight" class="form-control" required>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-md-4">
                                                        <label>Quantity Type</label>

                                                        @*@Html.DropDownList("QuantityTypeId", ViewBag.QuantityType as IEnumerable<SelectListItem>, "Select Quantity Type", new { @class = "form-control" })*@

                                                        <select id="QuantityTypeId" required name="QuantityTypeId" class="form-control js-example-basic-single">
                                                            <option value="0">Select Quantity </option>
                                                            @foreach (var item in ViewBag.QuantityType)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>

                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Quantity </label>
                                                        <input type="text" name="Quantity" value="@list[0].Quantity" class="form-control" required>
                                                    </div>
                                                    <div class="col-md-4">
                                                        <label>Driver Type</label>
                                                        @*@Html.DropDownList("DriverTypeId", ViewBag.DriverTypes as IEnumerable<SelectListItem>, "Select Driver Type", new { @class = "form-control" })*@

                                                        <select id="DriverTypeId" required name="DriverTypeId" class="form-control js-example-basic-single">
                                                            <option value="0">Select Driver </option>
                                                            @foreach (var item in ViewBag.DriverTypes)
                                                            {
                                                                <text>
                                                                    <option value="@item.Value">@item.Text</option>

                                                                </text>
                                                            }
                                                        </select>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Carrier Instruction:</label>
                                                <textarea rows="3" cols="3" name="CarrierInstructions" value="@list[0].CarrierInstructions" class="form-control" placeholder="Enter message" required></textarea>
                                            </div>
                                            <div class="text-right">
                                                <button type="submit" class="btn btn-primary">Save General</button>
                                            </div>

                                        </div>
                                    </div>

                                </div>

                            </form>


                        }

                    </div>


                    <div class="tab-pane fade" id="Section2">
                        <form>
                            <div class="row">

                                <div class="col-lg-12  ">


                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <input type="number" hidden value="@list[0].LoaderNumber" name="LoaderNumber" class="form-control" required>
                                                <input class="form-control" placeholder="Shipper Search" type="text" id="txtShipper" required name="ShipperName">

                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <input class="form-control" placeholder="Country" value="United States" readonly type="text" id="txtCountry" required name="CountryId">
                                            </div>
                                        </div>


                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <input class="form-control" placeholder="Address" type="text" id="txtAddress" required name="Address">
                                            </div>
                                        </div>

                                    </div>



                                    <div class="row">



                                        <div class="col-md-3">
                                            <div class="form-group">


                                                <input class="form-control" placeholder="Phone" type="text" id="txtPhone" required name="Phone">

                                            </div>
                                        </div>


                                        <div class="col-md-3">
                                            <div class="form-group">

                                                @*<select class=" form-control">
                                <option>Select State</option>
                                <option value="1">California</option>
                                <option value="2">Texas</option>
                                <option value="3">Florida</option>
                            </select>*@


                                                <select id="StateId" required name="StateId" onchange="getCityList('Save')"
                                                        class="form-control js-example-basic-single">
                                                    <option value="0">Select State </option>
                                                    @foreach (var item in ViewBag.States)
                                                    {
                                                        <text>
                                                            <option value="@item.Value">@item.Text</option>

                                                        </text>
                                                    }
                                                </select>


                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">


                                                <select required class="form-control" name="CityId" id="CitysId">

                                                    <option value="0" selected>Select City</option>

                                                </select>

                                            </div>

                                        </div>



                                        <div class="col-md-3">
                                            <div class="form-group">

                                                @*<input type="text" id="txtZipCode" name="ZipCode" placeholder="Zip Code" class="form-control">*@

                                                <input class="form-control" placeholder="Zip Code" type="text" id="txtZipCode" required name="ZipCode">
                                            </div>
                                        </div>
                                    </div>



                                    <div class="row">






                                        <div class="col-md-3">
                                            <div class="form-group">

                                                <input id="txtdateFrom" name="DateTimeFrom" placeholder="Date From" type="datetime-local" class="form-control">
                                            </div>

                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <input type="datetime-local" id="txtDateTimeTo" name="DateTimeTo" placeholder="Date To" class="form-control">
                                            </div>

                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">

                                                <input type="text" name="Traitor" id="txtTraitor" placeholder="Trailer #:" class="form-control">
                                            </div>

                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <input type="text" name="AppointmentNumber" id="txtAppointmentNumber" placeholder="Appointment Number" class="form-control">
                                            </div>

                                        </div>

                                    </div>






                                    <div class="row">

                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <input type="text" name="Comments" id="txtComments" placeholder="Comment" class="form-control">
                                            </div>

                                        </div>

                                    </div>


                                    <div class="row">
                                        <div class="col-md-6">

                                        </div>
                                        <div class="col-md-6 text-right">
                                            <a onclick="changeLabel('P')" id="btnAddPickup" href="#"
                                               class="btn btn-primary"
                                               style="background-color: #e80000;"><i class="fa fa-plus"></i> Add Pickup</a>
                                            &nbsp;
                                            <a onclick="changeLabel('D')" id="btnAddDelivery" href="#"
                                               class="btn btn-secondary"><i class="fa fa-plus"></i> Add Delivery</a>
                                        </div>

                                    </div>



                                </div>
                            </div>

                            <div class="col-md-12">

                                <div class="card-box">


                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="card-box">
                                                <div class="card-block">


                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <h5 class="text-bold card-title">Pickup</h5>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="text-right">
                                                                @*<button type="submit" href="#" class="btn btn-primary">Add Pickup</button>*@



                                                            </div>
                                                        </div>


                                                    </div>


                                                    <div class="table-responsive">
                                                        <table class="table table-striped mb-0" id="tblPickup">
                                                            <thead>
                                                                <tr>
                                                                    <th></th>
                                                                    <th>Pickup Information</th>
                                                                    <th></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (var PD in listPickDelivery)
                                                                {
                                                                    if (PD.StatusFlague == "P")
                                                                    {
                                                                        <tr>
                                                                            <td> <img src="~/assets/img/Logistic-Truck_Pickup.png" /></td>
                                                                            <td>

                                                                              
                                                                                @PD.Information
                                                                            </td>
                                                                            <td hidden>@PD.StatusFlague</td>
                                                                            <td hidden>@PD.ShipperId</td>
                                                                            <td hidden>@PD.ShipperName</td>
                                                                            <td hidden>@PD.CountryId</td>
                                                                            <td hidden>@PD.Phone</td>
                                                                            <td hidden>@PD.Address</td>
                                                                            <td hidden>@PD.CityId</td>
                                                                            <td hidden>@PD.StateId</td>
                                                                            <td hidden>@PD.ZipCode</td>
                                                                            <td hidden>@PD.DateTimeFrom</td>
                                                                            <td hidden>@PD.DateTimeTo</td>
                                                                            <td hidden>@PD.AppointmentNumber</td>
                                                                            <td hidden>@PD.Traitor</td>
                                                                            <td hidden>@PD.Comments</td>
                                                                            <td><input type="button" value="x" class="btn " style="background-color: #7c0710; color: white; padding: 0px 7px;" onclick="RemovePickup(this)" /></td>




                                                                        </tr>
                                                                    }
                                                                }
                                                            </tbody>


                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <div class="card-box">
                                                <div class="card-block">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <h5 class="text-bold card-title">Delivery</h5>
                                                        </div>

                                                        <div class="col-md-6">
                                                            <div class="text-right">
                                                                @*<button type="submit" href="#" class="btn btn-primary">Add Delivery</button>*@



                                                            </div>
                                                        </div>


                                                    </div>
                                                    @*<h5 class="text-bold card-title">Delivery</h5>*@
                                                    <div class="table-responsive">
                                                        <table class="table table-striped mb-0" id="tblDelivery">
                                                            <thead>
                                                                <tr>
                                                                    <th></th>
                                                                    <th>Delivery Information</th>
                                                                    <th></th>

                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @foreach (var PD in listPickDelivery)
                                                                {
                                                                    if (PD.StatusFlague == "D")
                                                                    {

                                                                <tr>
                                                                    <td> <img src="~/assets/img/Logistic-Truck_Delivery.png" /></td>
                                                                    <td>
                                                                        @PD.Information
                                                                    </td>

                                                                    <td hidden>@PD.Information</td>
                                                                    <td hidden>@PD.StatusFlague</td>
                                                                    <td hidden>@PD.ShipperId</td>
                                                                    <td hidden>@PD.ShipperName</td>
                                                                    <td hidden>@PD.CountryId</td>
                                                                    <td hidden>@PD.Phone</td>
                                                                    <td hidden>@PD.Address</td>
                                                                    <td hidden>@PD.CityId</td>
                                                                    <td hidden>@PD.StateId</td>
                                                                    <td hidden>@PD.ZipCode</td>
                                                                    <td hidden>@PD.DateTimeFrom</td>
                                                                    <td hidden>@PD.DateTimeTo</td>
                                                                    <td hidden>@PD.AppointmentNumber</td>
                                                                    <td hidden>@PD.Traitor</td>
                                                                    <td hidden>@PD.Comments</td>
                                                                    <td><input type="button" value="x" class="btn " style="background-color: #7c0710; color: white; padding: 0px 7px;" onclick="RemoveDelivery(this)" /></td>

                                                                </tr>
                                                                    }
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    @*<div class="text-right">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>*@
                                </div>
                                <div class="row">


                                    @foreach (var item in ViewBag.LoadDocuments)
                                    {
                                        @*<ul class="list-inline">
                        <li class="list-inline-item"><a target="_blank" class="social-icon text-xs-center" href="@item.ImagePath">@item.FileName</a></li>

                    </ul>*@

                                        <div class="col-md-4">
                                            @*<img src=""/>*@
                                            <a target="_blank" class="social-icon text-xs-center" href="@item.ImagePath">

                                                @*<i class="fa fa-file"></i>*@
                                                <img src="~/assets/img/documentation.png" />
                                                @*<img src="~/assets/img/Logistic-Truck_Pickup.png" />*@
                                                @item.FileName
                                            </a>


                                            @*<a target="_blank" class="social-icon text-xs-center" href="@item.ImagePath"><i class="fa fa-file"></i>  @item.FileName</a>*@
                                        </div>
                                    }

                                    @*<li class="list-inline-item"><a class="social-icon text-xs-center" target="_blank" href="@listLoadDocument.Filename">FB</a></li>
                <li class="list-inline-item"><a class="social-icon text-xs-center" target="_blank" href="#">G+</a></li>*@



                                </div>

                            </div>
                            <br/>

                            <div class="container">
                                <div class="row">
                                    <div class="col-md-12">
                                        @*<h4>Upload File</h4>*@

                                        @*<form enctype="multipart/form-data">*@
                                        <div class="form-group">
                                            <input id="file-upload" type="file" class="file" data-upload-url="/Load/UploadFiles/?LoaderName=@LoaderNumber"
                                                   multiple="multiple" name="files">
                                        </div>

                                        @*</form>*@
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12 text-right">
                                    @*<button type="submit" id="btnSavePickup" value="Submit" class="btn btn-primary" style="color: white;background-color: #e80000;">Submit</button>*@
                                    <input type="button" id="btnSavePickup" class="btn btn-primary" style="background-color: #e80000;" value="Save Pickup Delivery">

                                    @*<a  type="" onclick="changeLabel('P')" id="btnAddPickup" href="#" class="btn btn-primary" style="background-color: #e80000;"><i class="fa fa-plus"></i>
                Add Pickup</a>*@
                                </div>

                            </div>
                        </form>
                    </div>


                    <div class="tab-pane fade" id="Charges">
                        <form>
                            <div class="col-md-12">
                                @*@using (Html.BeginForm("SaveBroker", "Definition", FormMethod.Post))
                                    {

                                        @Html.AntiForgeryToken()*@

                                <div class="Add_Section">
                                    <div class="row">
                                        <div class="col-md-2">
                                            <label>From Broker</label>
                                            <input type="number" id="txtBroker" class="form-control" required>
                                        </div>
                                        <div class="col-md-3">
                                            <label>Charge Name</label>
                                            <input type="text" id="txtChargeName" class="form-control" required>
                                        </div>

                                        <div class="col-md-2">
                                            <label>Agent</label>
                                            <input type="number" id="txtAgent" value="0.00" disabled class="form-control">
                                        </div>
                                        <div class="col-md-2">
                                            <label>Branch</label>
                                            <input type="text" value="0.00" id="txtBranch" disabled class="form-control">
                                        </div>
                                        <div class="col-md-2">
                                            <label>Company</label>
                                            <input type="text" value="0.00" id="txtCompany" disabled class="form-control">
                                        </div>
                                        <div class="col-md-1">
                                            <label>Carrier</label>
                                            <input type="number" id="txtCarrier" class="form-control" required>
                                        </div>
                                    </div>

                                    <br />
                                    <div class="row">
                                        <div class="col-md-2">


                                            <input type="checkbox" id="chkComissionCharge" name="IsCommissionCharge">
                                            <label>Commission Charge</label>

                                        </div>

                                        <div class="col-md-3">
                                            <input type="checkbox" id="chkIsQuickPay" name="IsQuickPay">
                                            <label>Quick  Pay</label>

                                        </div>

                                        <div class="col-md-2">

                                            <input id="chkIsAgent" type="checkbox" name="IsFlatToAgent">
                                            <label>Flat to Agent</label>

                                        </div>

                                        <div class="col-md-2">

                                            <input id="chkIsBranch" type="checkbox" name="IsFlatToBranch">
                                            <label>Flat to Branch</label>
                                        </div>

                                        <div class="col-md-2">

                                            <input id="chkIsCompany" type="checkbox" name="IsFlatToCompany">
                                            <label>Flat to Company</label>

                                        </div>

                                    </div>
                                    <div class="row">

                                        <div class="col-md-9">


                                            <textarea rows="3" id="txtChargesComments" name="ChargesComments" class="form-control" required placeholder="Comments"></textarea>
                                        </div>
                                        <div class="col-md-3 text-right">
                                            <label></label>
                                            @*<a id="btnAddEdu"
                                                class="btn btn-primary  float-right"
                                                style="background-color: #e80000;margin-top: 30px"><i class="fa fa-plus"></i> Add New Charge</a>*@


                                            <button class="btn btn-primary" type="button" id="btnAddEdu" style="color: white;background-color: #e80000;">
                                                <i class="fa fa-plus"></i> Add New Charge
                                            </button>

                                        </div>

                                    </div>

                                </div>

                                <br />

                                <div class="row">
                                    <div class="col-lg-12">

                                        <div class="row">
                                            <div class="col-md-5">
                                                <h4 style="Color:black">Commission  Charges</h4>
                                            </div>
                                            <div class="col-md-7">
                                                @*<a onclick="changeLabel('AC')" id="btnAddCommission" href="#" data-toggle="modal" data-target="#AddCommissionDeduction"
                                                    class=" open-AddBookDialog btn btn-primary  float-right"
                                                    style="background-color: #e80000;"><i class="fa fa-plus"></i>Add Commission Charges</a>*@
                                            </div>
                                        </div>



                                        <div class="table-responsive">
                                            <table style="font-size:13px" class="table table-condensed table-striped table-sm mb-0" id="tblCharges">
                                                <thead>
                                                    <tr>


                                                        <th>Broker</th>
                                                        <th>Charge</th>
                                                        <th>Type</th>
                                                        <th>By</th>
                                                        <th>On</th>
                                                        <th>Agent</th>
                                                        <th>Branch</th>
                                                        <th>Company</th>
                                                        <th>Carrier</th>
                                                        <th>QP</th>

                                                        <th></th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @foreach (var load in listLoadCharge)
                                                    {
                                                        if (load.IsCommissionCharge == true)
                                                        {
                                                            <tr style="min-height:10px !important">
                                                                <td>@load.BrokerCharges</td>
                                                                <td>@load.ChargesFor</td>
                                                                <td>Commission</td>
                                                                <td>Jack</td>
                                                                <td></td>
                                                                <td>@load.AgentCharges</td>
                                                                <td>@load.BranchCharges</td>
                                                                <td>@load.CompanyCharges</td>
                                                                <td>@load.CarrierCharges</td>
                                                                <td>QP</td>

                                                                <td><input type="button" value="x" class="btn " style="background-color: #7c0710;color: white; padding: 0px 7px;" onclick="RemoveCommission(this)" /></td>
                                                                <td hidden>@load.IsFlatToAgent</td>
                                                                <td hidden>@load.IsFlatToBranch</td>
                                                                <td hidden>@load.IsFlatToCompany</td>
                                                                <td hidden>@load.IsQuickPay</td>
                                                                <td hidden>@load.IsCommissionCharge</td>
                                                                <td hidden>@load.Comments</td>



                                                            </tr>
                                                        }


                                                    }



                                                </tbody>


                                            </table>
                                        </div>


                                    </div>

                                </div>


                                <br />
                                <div class="row">
                                    <div class="col-lg-12">

                                        <div class="card-block">

                                            <div class="row">
                                                <div class="col-md-3">
                                                    <h4 style="Color:black">Deduction  Charges</h4>
                                                </div>
                                                <div class="col-md-9">
                                                    @*<a onclick="changeLabel('AD')" id="AddDeduction" href="#" data-toggle="modal" data-target="#AddCommissionDeduction"
                                                        class=" open-AddBookDialog btn btn-primary  float-right"
                                                        style="background-color: #e80000;"><i class="fa fa-plus"></i>Add Deduction Charges</a>*@
                                                </div>
                                            </div>


                                            <div class="table-responsive">
                                                <table style="font-size:13px" class="table table-condensed table-striped table-sm mb-0" id="tblDeduction">
                                                    <thead>
                                                        <tr>



                                                            <th>Broker</th>
                                                            <th>Charge</th>
                                                            <th>Type</th>
                                                            <th>By</th>
                                                            <th>On</th>
                                                            <th>Agent</th>
                                                            <th>Branch</th>
                                                            <th>Company</th>
                                                            <th>Carrier</th>
                                                            <th>QP</th>

                                                            <th></th>

                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var load in listLoadCharge)
                                                        {
                                                            if (load.IsDeductionCharge == true)
                                                            {
                                                        <tr style="min-height:10px !important">
                                                            <td>@load.BrokerCharges</td>
                                                            <td>@load.ChargesFor</td>
                                                            <td>Deduction</td>
                                                            <td>Jack</td>
                                                            <td></td>
                                                            <td>@load.AgentCharges</td>
                                                            <td>@load.BranchCharges</td>
                                                            <td>@load.CompanyCharges</td>
                                                            <td>@load.CarrierCharges</td>
                                                            <td>QP</td>
                                                            <td><input type="button" value="x" class="btn " style="background-color: #7c0710;color: white; padding: 0px 7px;" onclick="RemoveDeduction(this)" /></td>
                                                            <td hidden>@load.IsFlatToAgent</td>
                                                            <td hidden>@load.IsFlatToBranch</td>
                                                            <td hidden>@load.IsFlatToCompany</td>
                                                            <td hidden>@load.IsQuickPay</td>
                                                            <td hidden>@load.IsDeductionCharge</td>
                                                            <td hidden>@load.Comments</td>



                                                        </tr>
                                                            }

                                                        }


                                                    </tbody>


                                                </table>
                                            </div>
                                        </div>

                                    </div>



                                </div>
                                @*<div class="text-right"><
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                    </div>*@

                                @*}*@


                            </div>

                            <br />
                            <div class="row">
                                <div class="col-md-12 text-right">
                                    @*<button type="submit" id="btnSavePickup" value="Submit" class="btn btn-primary" style="color: white;background-color: #e80000;">Submit</button>*@
                                    <input class="btn btn-primary text-right" style="background-color: #e80000;" type="button" id="btnSaveCharges" value="Save Charges" />

                                </div>

                            </div>
                        </form>
                        <div class="row">
                            <div class="col-md-12">


                                @*<a id="btnSaveCharges" href="#"
                                    class="btn btn-primary type=" sub" float-right"
                                    style="background-color: #e80000;"><i class="fa fa-plus"></i> Save Load</a>*@


                                @*<a id="btnSaveCharges" href="#"
                                    class="btn btn-primary  float-right"
                                    style="background-color: #e80000;"><i class="fa fa-plus"></i> Save Load</a>*@







                                @*<button id="btnSaveCharges" href="#" type="button"
                                            class="btn btn-primary type=" sub" float-right"
                                            style="background-color: #e80000;">
                                        <i class="fa fa-plus"></i>
                                        Save Load
                                    </button>*@


                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@*Set Dropdown value on edit*@
<script type="text/javascript">
    $(document).ready(() => {

        $("#Brokerid").val(@BrokerId);
        $("#BrokerHelperid").val(@BrokerHelperId);
        $("#CompanyId").val(@CompanyId);
        $("#CarrierId").val(@CarrierId);
        $("#CarrierHelperId").val(@CarrierHelperId);
        $("#LoadTypeId").val(@LoadTypeId);
        $("#LoadSubTypeId").val(@LoadSubTypeId);
        $("#QuantityTypeId").val(@QuantityTypeId);
        $("#DriverTypeId").val(@DriverTypeId);
        $("#TruckId").val(@TruckId);

    });
</script>
<script>

    $('#Brokerid').change(function () {
        //alert($(this).val());
        if ($("#Brokerid").val() > "0") {
            $("#BrokerHelperid").select2("val", "0");
        }


    });

    $('#BrokerHelperid').change(function () {

        if ($("#BrokerHelperid").val() > "0") {
            $("#Brokerid").select2("val", "0");
        }

    });

    $('#CarrierId').change(function () {

        if ($("#CarrierId").val() > "0") {
            $("#CarrierHelperId").select2("val", "0");
        }

    });

    $('#CarrierHelperId').change(function () {

        if ($("#CarrierHelperId").val() > "0") {
            $("#CarrierId").select2("val", "0");
        }

    });


</script>

<script type="text/javascript">



    function SelectedIndexChanged(element, type) {
        var selectedText;
        var selectedValue;

        if (type == 'B') {
            //$("#BrokerHelperid").select2("val", "0");
            //selectedText = $("#Brokerid").find("option:selected").text();
            //selectedValue = $("#Brokerid").val();

            //Comment label text
            //document.getElementById("LoderBrokerIds").textContent = selectedText;

            //document.getElementById("BrokerHelperid").value = 0;
            //$('#BrokerHelperid').select2();


            //$("#select").select2("val"); //get the value
            //set the value




            //$('#BrokerHelperid').select2('destroy');

            ////Load the options:
            //$('#BrokerHelperid').append(...);

            ////Select the default option:
            //$('#BrokerHelperid').val(default_option);

            ////And finally load the select2:
            //$('#BrokerHelperid').select2()



            //$('#BrokerHelperid').val('0');
            //$('#BrokerHelperid').trigger('change');

            //$('#mySelect2').val(null).trigger('change');
            //$('#BrokerHelperid').val(0).change();
            //$('#BrokerHelperid').val(0).trigger('change');
        }

        else if (type == 'BH') {
            //$("#Brokerid").select2("val", "0");

            //selectedText = $("#BrokerHelperid").find("option:selected").text();
            //selectedValue = $("#BrokerHelperid").val();



            //$('#Brokerid').val('0');
            //$('#Brokerid').trigger('change');
            ////
            //document.getElementById("LoderBrokerIds").textContent = selectedText;
            //$('#Brokerid').val(0).change();

            //document.getElementById('Brokerid').value = 0;

            //$('#Brokerid').val(0).trigger('change');
        }
        //else if (type == 'C') {

        //    selectedText = $("#CarrierId").find("option:selected").text();
        //    selectedValue = $("#CarrierId").val();


        //    document.getElementById("lblCarrier").textContent = selectedText;

        //    //document.getElementById("lblCarrier").textContent = 'Carrier ( ' + selectedText + ',' + 'ID:' + selectedValue + ')';

        //    document.getElementById('CarrierHelperId').value = 0;
        //}


        //else if (type == 'CH') {

        //    selectedText = $("#CarrierHelperId").find("option:selected").text();
        //    selectedValue = $("#CarrierHelperId").val();


        //    document.getElementById("lblCarrier").textContent = selectedText;

        //    //document.getElementById("lblCarrier").textContent = 'Carrier Helper( ' + selectedText + ',' + 'ID:' + selectedValue + ')';

        //    document.getElementById('CarrierId').value = 0;
        //}




    }


</script>


<script>

    function getCityList(type) {
        if (type == 'Save') {


            var state_Id = $("#StateId").val();

            $.ajax({
                url: '/Load/GetCities',
                type: 'POST',
                datatype: 'application/json',
                contentType: 'application/json',
                data: JSON.stringify({ StateId: +state_Id }),
                success: function (result) {
                    $("#CitysId").html("");
                    $("#CitysId").append
                        ($('<option></option>').val(0).html("Select City"));
                    $.each($.parseJSON(result), function (i, city) { $("#CitysId").append($('<option></option>').val(city.Value).html(city.Text)) })
                },
                error: function () { alert("Whooaaa! Something went wrong..") },
            });
        }

        else if (type == 'Edit') {
            var state_Id = $("#StateId").val();


            //var myModal = $('#Edit_Carrier');
            //var stateId = $("#CitysId", myModal).val();

            $.ajax({
                url: '/Load/GetCities',
                type: 'POST',
                datatype: 'application/json',
                contentType: 'application/json',
                data: JSON.stringify({ cityId: +state_Id }),
                success: function (result) {
                    $("#CitysId").html("");
                    $("#CitysId").append
                        ($('<option></option>').val(null).html("Select City"));
                    $.each($.parseJSON(result), function (i, city) { $("#CitysId").append($('<option></option>').val(city.Value).html(city.Text)) })
                },
                error: function () { alert("Whooaaa! Something went wrong..") },
            });
        }

    }


</script>






@*Pickup and Delivery addition to datatatable*@

<Script>
    $("body").on("click", "#btnAddPickup", function () {


        //Reference the Name and Country TextBoxes
        var ShipperName = $("#txtShipper");
        var Address = $("#txtAddress");
        var CityName = $("#CitysId").find("option:selected").text();
        var StateName = $("#StateId").find("option:selected").text();
        var CountryNameVal = $("#txtCountry");
        var CityNameVal = $("#CitysId").find("option:selected").val();


        var StateNameVal = $("#StateId").find("option:selected").val();
        var DateFrom = $('#txtdateFrom').val();
        var DateTo = $('#txtDateTimeTo').val();

        var Zipcode = document.getElementById("txtZipCode").value;


        var Traitor = $('#txtTraitor');
        var Phone = $('#txtPhone');
        var AppointmentNumber = $('#txtAppointmentNumber').val();
        var Comments = $('#txtComments').val();


        //Get the reference of the Table's TBODY element.
        var tBody = $("#tblPickup > TBODY")[0];

        if (ShipperName.val() == "") {
            alert('Enter Shipper Name ');
            $("#txtShipper").focus();
            return;
        }
        if (Address.val() == "") {
            alert('Enter Address ');
            $("#txtAddress").focus();
            return;
        }
        if (ShipperName.val() != "" || Address.val() != "") {


            //Add Row.
            var row = tBody.insertRow(-1);

            var img = document.createElement('img');
            img.src = "/assets/img/Logistic-Truck_Pickup.png";

            cell = $(row.insertCell(-1));
            cell.html("<img src='" + img.src + "'/>");
            //cell.appendChild(img);
            //Add Name cell.
            //Add Country cell.
            cell = $(row.insertCell(-1));
            cell.html(ShipperName.val() + ', ' + Address.val() + ', ' + CityName + ', ' + StateName + ', ' + DateFrom);

            cell = $(row.insertCell(-1));
            cell.html('P');
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(1);
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(ShipperName.val());
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(1);
            cell.css({ 'display': 'none' });



            cell = $(row.insertCell(-1));
            cell.html(Phone.val());

            cell.css({ 'display': 'none' });
            cell = $(row.insertCell(-1));
            cell.html(Address.val());
            cell.css({ 'display': 'none' });


            cell = $(row.insertCell(-1));
            cell.html(CityNameVal);
            cell.css({ 'display': 'none' });



            cell = $(row.insertCell(-1));
            cell.html(StateNameVal);
            cell.css({ 'display': 'none' });




            cell = $(row.insertCell(-1));
            cell.html(Zipcode);
            cell.css({ 'display': 'none' });



            cell = $(row.insertCell(-1));
            cell.html(DateFrom);
            cell.css({ 'display': 'none' });


            //var todaydate = new Date();
            //var day = todaydate.getDate();
            //var month = todaydate.getMonth() + 1;
            //var year = todaydate.getFullYear();
            //var datestring = day + "/" + month + "/" + year;
            cell = $(row.insertCell(-1));
            cell.html(DateTo);
            cell.css({ 'display': 'none' });


            cell = $(row.insertCell(-1));
            cell.html(AppointmentNumber);
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(Traitor.val());
            cell.css({ 'display': 'none' });


            cell = $(row.insertCell(-1));
            cell.html(Comments);
            cell.css({ 'display': 'none' });

            //Add Button cell.
            cell = $(row.insertCell(-1));
            var btnRemove = $("<input />");
            btnRemove.attr("type", "button");
            btnRemove.attr("onclick", "RemovePickup(this);");
            btnRemove.val("x");
            btnRemove.attr("style", "background - color: #7c0710; color: white; padding: 0px 7px;");
            btnRemove.attr("class", "btn");
            cell.append(btnRemove);

        }


    });

    function RemovePickup(button) {
        //Determine the reference of the Row using the Button.
        var row = $(button).closest("TR");
        var name = $("TD", row).eq(0).html();
        if (confirm("Do you want to delete: " + name)) {
            //Get the reference of the Table.
            var table = $("#tblPickup")[0];

            //Delete the Table row using it's Index.
            table.deleteRow(row[0].rowIndex);
        }
    };
</Script>


@*Add Rows to Delivery*@
<Script>
    $("body").on("click", "#btnAddDelivery", function () {


        //Reference the Name and Country TextBoxes
        var ShipperName = $("#txtShipper");
        var Address = $("#txtAddress");
        var CityName = $("#CitysId").find("option:selected").text();
        var StateName = $("#StateId").find("option:selected").text();
        var CountryNameVal = $("#txtCountry");
        var CityNameVal = $("#CitysId").find("option:selected").val();


        var StateNameVal = $("#StateId").find("option:selected").val();
        var DateFrom = $('#txtdateFrom').val();
        var DateTo = $('#txtDateTimeTo').val();

        var Zipcode = document.getElementById("txtZipCode").value;


        var Traitor = $('#txtTraitor');
        var Phone = $('#txtPhone');
        var AppointmentNumber = $('#txtAppointmentNumber').val();
        var Comments = $('#txtComments').val();


        //Get the reference of the Table's TBODY element.
        var tBody = $("#tblDelivery > TBODY")[0];

        if (ShipperName.val() == "") {
            alert('Enter Shipper Name ');
            $("#txtShipper").focus();
            return;
        }
        if (Address.val() == "") {
            alert('Enter Address ');
            $("#txtAddress").focus();
            return;
        }
        if (ShipperName.val() != "" || Address.val() != "") {


            //Add Row.
            var row = tBody.insertRow(-1);
            //Add Name cell.
            //Add Country cell.



            var img = document.createElement('img');
            img.src = "/assets/img/Logistic-Truck_Pickup.png";

            cell = $(row.insertCell(-1));
            cell.html("<img src='" + img.src + "'/>");

            cell = $(row.insertCell(-1));
            cell.html(ShipperName.val() + ', ' + Address.val() + ', ' + CityName + ', ' + StateName + ', ' + DateFrom);

            cell = $(row.insertCell(-1));
            cell.html('D');
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(1);
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(ShipperName.val());
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(1);
            cell.css({ 'display': 'none' });



            cell = $(row.insertCell(-1));
            cell.html(Phone.val());

            cell.css({ 'display': 'none' });
            cell = $(row.insertCell(-1));
            cell.html(Address.val());
            cell.css({ 'display': 'none' });


            cell = $(row.insertCell(-1));
            cell.html(CityNameVal);
            cell.css({ 'display': 'none' });



            cell = $(row.insertCell(-1));
            cell.html(StateNameVal);
            cell.css({ 'display': 'none' });




            cell = $(row.insertCell(-1));
            cell.html(Zipcode);
            cell.css({ 'display': 'none' });



            cell = $(row.insertCell(-1));
            cell.html(DateFrom);
            cell.css({ 'display': 'none' });


            //var todaydate = new Date();
            //var day = todaydate.getDate();
            //var month = todaydate.getMonth() + 1;
            //var year = todaydate.getFullYear();
            //var datestring = day + "/" + month + "/" + year;
            cell = $(row.insertCell(-1));
            cell.html(DateTo);
            cell.css({ 'display': 'none' });


            cell = $(row.insertCell(-1));
            cell.html(AppointmentNumber);
            cell.css({ 'display': 'none' });

            cell = $(row.insertCell(-1));
            cell.html(Traitor.val());
            cell.css({ 'display': 'none' });


            cell = $(row.insertCell(-1));
            cell.html(Comments);
            cell.css({ 'display': 'none' });

            //Add Button cell.
            cell = $(row.insertCell(-1));
            var btnRemove = $("<input />");
            btnRemove.attr("type", "button");
            btnRemove.attr("onclick", "RemoveDelivery(this);");
            btnRemove.val("x");
            btnRemove.attr("style", "background - color: #7c0710; color: white; padding: 0px 7px;");
            btnRemove.attr("class", "btn");
            cell.append(btnRemove);

        }


    });

    function RemoveDelivery(button) {
        //Determine the reference of the Row using the Button.
        var row = $(button).closest("TR");
        var name = $("TD", row).eq(0).html();
        if (confirm("Do you want to delete: " + name)) {
            //Get the reference of the Table.
            var table = $("#tblDelivery")[0];

            //Delete the Table row using it's Index.
            table.deleteRow(row[0].rowIndex);
        }
    };
</Script>



<script>
    $("body").on("click", "#btnSavePickup", function () {
        //Loop through the Table rows and build a JSON array.
        var customers = new Array();
        var LoaderNumber = @LoaderNumber;

            alert(LoaderNumber);
        $("#tblPickup TBODY TR ").each(function () {
            var row = $(this);
            var customer = {};



            customer.Information = row.find("TD").eq(1).html();
            customer.StatusFlague = row.find("TD").eq(2).html();
            customer.ShipperId = row.find("TD").eq(3).html();
            customer.ShipperName = row.find("TD").eq(4).html();
            customer.CountryId = row.find("TD").eq(5).html();
            customer.Phone = row.find("TD").eq(6).html();
            customer.Address = row.find("TD").eq(7).html();
            customer.CityId = row.find("TD").eq(8).html();
            customer.StateId = row.find("TD").eq(9).html();
            customer.ZipCode = row.find("TD").eq(10).html();
            customer.DateTimeFrom = row.find("TD").eq(11).html();
            customer.DateTimeTo = row.find("TD").eq(12).html();
            customer.AppointmentNumber = row.find("TD").eq(13).html();
            customer.Traitor = row.find("TD").eq(14).html();
            customer.Comments = row.find("TD").eq(15).html();

            customers.push(customer);


        });

        $("#tblDelivery TBODY TR ").each(function () {
            var row = $(this);
            var customer = {};

            customer.Information = row.find("TD").eq(1).html();
            customer.StatusFlague = row.find("TD").eq(2).html();
            customer.ShipperId = row.find("TD").eq(3).html();
            customer.ShipperName = row.find("TD").eq(4).html();
            customer.CountryId = row.find("TD").eq(5).html();
            customer.Phone = row.find("TD").eq(6).html();
            customer.Address = row.find("TD").eq(7).html();
            customer.CityId = row.find("TD").eq(8).html();
            customer.StateId = row.find("TD").eq(9).html();
            customer.ZipCode = row.find("TD").eq(10).html();
            customer.DateTimeFrom = row.find("TD").eq(11).html();
            customer.DateTimeTo = row.find("TD").eq(12).html();
            customer.AppointmentNumber = row.find("TD").eq(13).html();
            customer.Traitor = row.find("TD").eq(14).html();
            customer.Comments = row.find("TD").eq(15).html();
            customers.push(customer);
        });


            var model = {
                LoaderNumber: LoaderNumber,
                charges: customers,
                    };

        //Send the JSON array to Controller using AJAX.
        $.ajax({
            type: "POST",
            url: "/Load/UpdateDelivery",
            data: JSON.stringify(model),

            //data: data,

            //data: JSON.stringify({ jewellerId: filter, locale: locale }),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (r) {
                alert(r + " record(s) inserted.");
            }
        });
    });

</script>

<Script>
    $("body").on("click", "#btnAddEdu", function () {

        //var c = document.getElementById('chkComissionCharge').checked;



        //Reference the Name and Country TextBoxes.
        var ChargeName = $("#txtChargeName");
        var Broker = $("#txtBroker");
        var Agent = $("#txtAgent");
        var Branch = $("#txtBranch");
        var Company = $("#txtCompany");
        var Carrier = $("#txtCarrier");
        var IsFlatToAgent = document.getElementById('chkIsAgent').checked;

        var IsFlatToBranch = document.getElementById('chkIsBranch').checked;
        var IsFlatToCompany = document.getElementById('chkIsCompany').checked;
        var IsQuickPay = document.getElementById('chkIsQuickPay').checked;

        var CommissionCharge = document.getElementById('chkComissionCharge').checked;
        var QP = 'QP';

        //var Comments = $("#txtChargesComments");
        //alert(Comments);

        var Comments = document.getElementById("txtChargesComments").value;




        if (CommissionCharge == true) {
            //Get the reference of the Table's TBODY element.
            var tBody = $("#tblCharges > TBODY")[0];

            if (Broker.val() == "") {
                alert('Enter Charges From Broker');
                $("#txtBroker").focus();
                return;
            }


            if (ChargeName.val() == "") {
                alert('Enter Charges Name');
                $("#txtChargeName").focus();
                return;
            }

            if (Carrier.val() == "") {
                alert('Enter Carrier Charges');
                $("#txtCarrier").focus();
                return;
            }
            if (Broker.val() != "" || ChargeName.val() != "" || Carrier.val() != "") {
                //Add Row.
                var row = tBody.insertRow(-1);

                //Add Name cell.
                //Add Country cell.
                cell = $(row.insertCell(-1));
                cell.html(Broker.val());
                cell = $(row.insertCell(-1));
                cell.html(ChargeName.val());

                cell = $(row.insertCell(-1));
                cell.html("Commission");

                cell = $(row.insertCell(-1));
                cell.html("Jack");

                var todaydate = new Date();
                var day = todaydate.getDate();
                var month = todaydate.getMonth() + 1;
                var year = todaydate.getFullYear();
                var datestring = day + "/" + month + "/" + year;
                cell = $(row.insertCell(-1));
                cell.html(datestring);


                cell = $(row.insertCell(-1));
                cell.html(Agent.val());


                cell = $(row.insertCell(-1));
                cell.html(Branch.val());

                cell = $(row.insertCell(-1));
                cell.html(Company.val());

                cell = $(row.insertCell(-1));
                cell.html(Carrier.val());

                cell = $(row.insertCell(-1));
                cell.html('QP');

                cell = $(row.insertCell(-1));
                cell.html(IsFlatToAgent);
                cell.css({ 'display': 'none' });

                cell = $(row.insertCell(-1));
                cell.html(IsFlatToBranch);
                cell.css({ 'display': 'none' });

                cell = $(row.insertCell(-1));
                cell.html(IsFlatToCompany);
                cell.css({ 'display': 'none' });



                cell = $(row.insertCell(-1));
                cell.html(IsQuickPay);
                cell.css({ 'display': 'none' });

                cell = $(row.insertCell(-1));
                cell.html(Comments);
                cell.css({ 'display': 'none' });




                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "RemoveCommission(this);");
                btnRemove.val("x");
                btnRemove.attr("style", "background-color:#7c0710;color:white");
                btnRemove.attr("class", "btn");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                //Broker.val("");
                //Charge.val("");
                //Type.val("");
                //By.val("");
                //On.val("");
                //Agent.val("");
                //Branch.val("");
                //Company.val("");
                //Carrier.val("");
                //QP.val("");
            }
        }

        else if (CommissionCharge == false) {
            //Get the reference of the Table's TBODY element.
            var tBody = $("#tblDeduction > TBODY")[0];

            if (Broker.val() == "") {
                alert('Enter Charges From Broker');
                $("#txtBroker").focus();
                return;
            }


            if (ChargeName.val() == "") {
                alert('Enter Charges Name');
                $("#txtChargeName").focus();
                return;
            }

            if (Carrier.val() == "") {
                alert('Enter Carrier Charges');
                $("#txtCarrier").focus();
                return;
            }




            if (Broker.val() != "" || ChargeName.val() != "" || Carrier.val() != "") {
                //Add Row.
                var row = tBody.insertRow(-1);


                //Add Name cell.
                //Add Country cell.
                cell = $(row.insertCell(-1));
                cell.html(Broker.val());
                cell = $(row.insertCell(-1));
                cell.html(ChargeName.val());

                cell = $(row.insertCell(-1));
                cell.html("Deduction");


                cell = $(row.insertCell(-1));
                cell.html("Jack");

                var todaydate = new Date();
                var day = todaydate.getDate();
                var month = todaydate.getMonth() + 1;
                var year = todaydate.getFullYear();
                var datestring = day + "/" + month + "/" + year;
                cell = $(row.insertCell(-1));
                cell.html(datestring);


                cell = $(row.insertCell(-1));
                cell.html(Agent.val());


                cell = $(row.insertCell(-1));
                cell.html(Branch.val());

                cell = $(row.insertCell(-1));
                cell.html(Company.val());

                cell = $(row.insertCell(-1));
                cell.html(Carrier.val());

                cell = $(row.insertCell(-1));
                cell.html('QP');

                cell = $(row.insertCell(-1));
                cell.html(IsFlatToAgent);
                cell.css({ 'display': 'none' });

                cell = $(row.insertCell(-1));
                cell.html(IsFlatToBranch);
                cell.css({ 'display': 'none' });

                cell = $(row.insertCell(-1));
                cell.html(IsFlatToCompany);
                cell.css({ 'display': 'none' });



                cell = $(row.insertCell(-1));
                cell.html(IsQuickPay);
                cell.css({ 'display': 'none' });

                cell = $(row.insertCell(-1));
                cell.html(Comments);
                cell.css({ 'display': 'none' });


                //Add Button cell.
                cell = $(row.insertCell(-1));
                var btnRemove = $("<input />");
                btnRemove.attr("type", "button");
                btnRemove.attr("onclick", "RemoveDeduction(this);");
                btnRemove.val("x");
                btnRemove.attr("style", "background-color:#7c0710;color:white");
                btnRemove.attr("class", "btn");
                cell.append(btnRemove);

                //Clear the TextBoxes.
                //Broker.val("");
                //Charge.val("");
                //Type.val("");
                //By.val("");
                //On.val("");
                //Agent.val("");
                //Branch.val("");
                //Company.val("");
                //Carrier.val("");
                //QP.val("");
            }
        }

    });

    function RemoveCommission(button) {
        //Determine the reference of the Row using the Button.
        var row = $(button).closest("TR");
        var name = $("TD", row).eq(0).html();
        if (confirm("Do you want to delete: " + name)) {
            //Get the reference of the Table.
            var table = $("#tblCharges")[0];

            //Delete the Table row using it's Index.
            table.deleteRow(row[0].rowIndex);
        }
    };

    function RemoveDeduction(button) {
        //Determine the reference of the Row using the Button.
        var row = $(button).closest("TR");
        var name = $("TD", row).eq(0).html();
        if (confirm("Do you want to delete: " + name)) {
            //Get the reference of the Table.
            var table = $("#tblDeduction")[0];

            //Delete the Table row using it's Index.
            table.deleteRow(row[0].rowIndex);
        }
    };
</Script>



<script>

    $("body").on("click", "#btnAddDed", function () {
        //Reference the Name and Country TextBoxes.
        var Brokerd = $("#ChargeId");
        //var Charged = $("#Charged");
        //var Typed = $("#Typed");
        //var Byd = $("#Byd");
        //var Ond = $("#Ond");
        //var Agentd = $("#Agentd");
        //var Branchd = $("#Branchd");
        //var Companyd = $("#Companyd");
        //var Carrierd = $("#Carrierd");
        //var QPd = $("#QPd");




        //Get the reference of the Table's TBODY element.
        var tBody = $("#tblDeduction > TBODY")[0];
        if (Brokerd.val() != "") {
            //Add Row.
            var row = tBody.insertRow(-1);



            //Add Name cell.
            //Add Country cell.
            cell = $(row.insertCell(-1));
            cell.html(Brokerd.val());
            cell = $(row.insertCell(-1));
            cell.html(Charged.val());
            cell = $(row.insertCell(-1));
            cell.html(Typed.val());
            cell = $(row.insertCell(-1));
            cell.html(Byd.val());

            cell = $(row.insertCell(-1));
            cell.html(Ond.val());

            cell = $(row.insertCell(-1));
            cell.html(Agentd.val());


            cell = $(row.insertCell(-1));
            cell.html(Branchd.val());

            cell = $(row.insertCell(-1));
            cell.html(Companyd.val());

            cell = $(row.insertCell(-1));
            cell.html(Carrierd.val());

            cell = $(row.insertCell(-1));
            cell.html(QPd.val());



            //Add Button cell.
            cell = $(row.insertCell(-1));
            var btnRemove = $("<input />");
            btnRemove.attr("type", "button");
            btnRemove.attr("onclick", "Remove5(this);");
            btnRemove.val("x");
            btnRemove.attr("style", "background-color:#7c0710;color:white");
            btnRemove.attr("class", "btn");
            cell.append(btnRemove);

            //Clear the TextBoxes.
            Brokerd.val("");
            Charged.val("");
            Typed.val("");
            Byd.val("");
            Ond.val("");
            Agentd.val("");
            Branchd.val("");
            Companyd.val("");
            Carrierd.val("");
            QPd.val("");
        }
    });

    function Remove5(button) {
        //Determine the reference of the Row using the Button.
        var row = $(button).closest("TR");
        var name = $("TD", row).eq(0).html();
        if (confirm("Do you want to delete: " + name)) {
            //Get the reference of the Table.
            var table = $("#tblDeduction")[0];

            //Delete the Table row using it's Index.
            table.deleteRow(row[0].rowIndex);
        }
    };
</script>


<script type="text/javascript">
    //function IsCommissionCharges(checkbox, ChargeType) {
    //    if(checkbox.checked)
    //    {
    //        alert("a");
    //    }

    //}

    //function Enable(checkbox, Enabletype)
    //{
    //    if (Enabletype == 'A') {
    //        if (checkbox.checked) {
    //            alert("a");
    //            document.getElementById('txtAgent').Enable = 'true';
    //            document.getElementById("txtAgent").setAttribute("disabled", true);
    //        }
    //    }

    //}

    $(function () {
        $("#chkIsAgent").click(function () {
            if ($(this).is(":checked")) {
                $("#txtAgent").removeAttr("disabled");
                $("#txtAgent").focus();
            } else {
                $("#txtAgent").attr("disabled", "disabled");
            }
        });
    });

    $(function () {
        $("#chkIsBranch").click(function () {
            if ($(this).is(":checked")) {
                $("#txtBranch").removeAttr("disabled");
                $("#txtBranch").focus();
            } else {
                $("#txtBranch").attr("disabled", "disabled");
            }
        });
    });

    $(function () {
        $("#chkIsCompany").click(function () {
            if ($(this).is(":checked")) {
                $("#txtCompany").removeAttr("disabled");
                $("#txtCompany").focus();
            } else {
                $("#txtCompany").attr("disabled", "disabled");
            }
        });
    });




</script>

<script>
    function changeLabel(LoadType) {
        if (LoadType == 'P') {
            let lbl = document.getElementById('LoadType');
            var Load = 'Add Pickup';
            lbl.innerHTML = '<span style="text-transform:capitalize;"> ' + Load + ' </span>';
        }
        else if (LoadType == 'D') {
            let lbl = document.getElementById('LoadType');
            var Load = 'Add Delivery';
            lbl.innerHTML = '<span style="text-transform:capitalize;"> ' + Load + ' </span>';
        }
        else if (LoadType == 'AC') {

            let lbl = document.getElementById('LoadTypeCharges');
            var Load = 'Commission Charges';

            lbl.innerHTML = '<span style="text-transform:capitalize;"> ' + Load + ' </span>';
        }
        else if (LoadType == 'AD') {
            let lbl = document.getElementById('LoadTypeCharges');
            var Load = 'Deduction Charges';
            lbl.innerHTML = '<span style="text-transform:capitalize;"> ' + Load + ' </span>';
        }




    }
</script>



<script>
    $("body").on("click", "#btnSaveCharges", function () {
        //Loop through the Table rows and build a JSON array.
        var customers = new Array();
        var customer = {};
           var LoaderNumber = @LoaderNumber;
        //customer.Comments = 'Hello';
        //customers.push(customer);

        $("#tblCharges TBODY TR ").each(function () {
            var row = $(this);
            var customer = {};


            customer.BrokerCharges = row.find("TD").eq(0).html();
            customer.ChargesFor = row.find("TD").eq(1).html();
            customer.IsFlatToAgent = row.find("TD").eq(10).html();
            if (customer.IsFlatToAgent == "") {
                customer.IsFlatToAgent = false;
            }

            customer.AgentCharges = row.find("TD").eq(5).html();

            customer.IsFlatToBranch = row.find("TD").eq(11).html();

            if (customer.IsFlatToBranch == "") {
                customer.IsFlatToBranch = false;
            }
            customer.BranchCharges = row.find("TD").eq(6).html();

            customer.IsFlatToCompany = row.find("TD").eq(12).html();

            if (customer.IsFlatToCompany == "") {
                customer.IsFlatToCompany = false;
            }
            customer.CompanyCharges = row.find("TD").eq(7).html();

            customer.CarrierCharges = row.find("TD").eq(8).html();
            customer.IsQuickPay = row.find("TD").eq(13).html();

            if (customer.IsQuickPay == "") {
                customer.IsQuickPay = false;
            }

            customer.IsCommissionCharge = 1;
            customer.IsDeductionCharge = 0;
            customer.Comments = row.find("TD").eq(14).html();

            customers.push(customer);

        });


        $("#tblDeduction TBODY TR ").each(function () {
            var row = $(this);
            var customer = {};


            customer.BrokerCharges = row.find("TD").eq(0).html();
            customer.ChargesFor = row.find("TD").eq(1).html();
            customer.IsFlatToAgent = row.find("TD").eq(10).html();
            if (customer.IsFlatToAgent == "") {
                customer.IsFlatToAgent = false;
            }

            customer.AgentCharges = row.find("TD").eq(5).html();

            customer.IsFlatToBranch = row.find("TD").eq(11).html();

            if (customer.IsFlatToBranch == "") {
                customer.IsFlatToBranch = false;
            }
            customer.BranchCharges = row.find("TD").eq(6).html();

            customer.IsFlatToCompany = row.find("TD").eq(12).html();

            if (customer.IsFlatToCompany == "") {
                customer.IsFlatToCompany = false;
            }
            customer.CompanyCharges = row.find("TD").eq(7).html();

            customer.CarrierCharges = row.find("TD").eq(8).html();
            customer.IsQuickPay = row.find("TD").eq(13).html();

            if (customer.IsQuickPay == "") {
                customer.IsQuickPay = false;
            }

            customer.IsCommissionCharge = 0;
            customer.IsDeductionCharge = 1;
            customer.Comments = row.find("TD").eq(14).html();

            customers.push(customer);

        });

         var model = {
                LoaderNumber: LoaderNumber,
                charges: customers,
                    };

        //Send the JSON array to Controller using AJAX.
        $.ajax({

            type: "POST",
            url: "/Load/UpdateCharges",
            data: JSON.stringify(model),
            //data: { 'ListOfVariants': customers },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (r) {
                alert(r + " record(s) inserted.");
            }
        });
    });


</script>

<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#Brokerid').select2();
    });
</script>

<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#BrokerHelperid').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#CompanyId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#CarrierId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#CarrierHelperId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#LoadTypeId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#TruckId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#LoadSubTypeId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#QuantityTypeId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#DriverTypeId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#StateId').select2();
    });
</script>
<script>
    // In your Javascript (external .js resource or <script> tag)
    jQuery(document).ready(function () {
        jQuery('#CitysId').select2();
    });
</script>