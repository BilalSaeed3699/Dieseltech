@using Dieseltech.Models;

@{
    ViewBag.Title = "Broker";

    //List<tblLoadCharge1> list = (List<tblLoadCharge1>)ViewBag.LoadPickupDelivery;


    //List<tblLoadPickupDelivery> listPickDelivery = (List<tblLoadPickupDelivery>)ViewBag.LoadPickupDelivery;



    //List<sp_Driver_List_Result> list = (List<sp_Driver_List_Result>)ViewBag.DriverList;
}
<head>
    @*<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

        <script src="//code.jquery.com/jquery-1.10.2.js"></script>

        <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>*@
    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>*@
    <style>
        /*#Add_Shipper{
            z-index: 1001 !important;
        }*/
        /* #txtShipperAddress {
            font-size: 18px;
        }

        .form-group {
            margin-bottom: 10px;
            margin-top: 50px;
        }

            .form-group label {
                font-size: 18px;
                font-weight: 600;
            }

            .form-group input {
                width: 100%;
                padding: .375rem .75rem;
                font-size: 1rem;
                line-height: 1.5;
                color: #495057;
                background-color: #fff;
                background-clip: padding-box;
                border: 1px solid #ced4da;
                border-radius: .25rem;
                transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
            }

                .form-group input:focus {
                    color: #495057;
                    background-color: #fff;
                    border-color: #80bdff;
                    outline: 0;
                    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
                }*/

        .ui-autocomplete {
            max-height: 200px;
            overflow-y: auto;
            /* prevent horizontal scrollbar */
            overflow-x: hidden;
            /* add padding to account for vertical scrollbar */
            padding-right: 20px;
        }


        .nav-tabs.nav-tabs-solid > li > a.active, .nav-tabs.nav-tabs-solid > li > a.active:hover, .nav-tabs.nav-tabs-solid > li > a.active:focus {
            /*background-color: #009efb;
                    border-color: #009efb;*/
            background-color: #f1bb62;
            border-color: #f1bb62;
        }

        /* th {
                    background-color: white;
                    color: black;
                }
        */
        .required {
            Color: red !important;
        }
        /*  table {
                    counter-reset: tableCount;
                }

                .counterCell:before {
                    content: counter(tableCount);
                    counter-increment: tableCount;
                }*/
        .select2-container {
            width: 100% !important;
        }

        .table-striped > tbody > tr:nth-child(2n+0) > td, .table-striped {
            background-color: transparent;
        }
        /* change row color on Pikcup selection */
        .table-layout {
            text-align: center;
            border: 1px solid black;
            border-collapse: collapse;
            font-family: "Trebuchet MS";
            margin: 0 auto 0;
        }

            .table-layout td, .table-layout th {
                border: 1px solid grey;
                padding: 5px 5px 0;
            }

            .table-layout td {
                text-align: left;
            }

        .selected {
            color: white;
            background-color: #009efb !important;
        }

        /*change row color on Delivery selection*/
        .table-layout-D {
            text-align: center;
            border: 1px solid black;
            border-collapse: collapse;
            font-family: "Trebuchet MS";
            margin: 0 auto 0;
        }

            .table-layout-D td, .table-layout-D th {
                border: 1px solid grey;
                padding: 5px 5px 0;
            }

            .table-layout-D td {
                text-align: left;
            }

        .selected {
            color: white;
            background-color: #009efb !important;
        }

        /*input {
                    width: 100%;
                    font: inherit;
                    padding: 0.25em 0.5em;
                    border: 0.125em solid hsl(30, 76%, 10%);
                    outline: none;
                }*/

        /* Show red borders when filled, but invalid */
        /*input:not(:placeholder-shown) {
                        border-color: hsl(0, 76%, 50%);
                        ;
                    }*/

        /* Show green borders when valid */
        /*input:valid {
                        border-color: hsl(120, 76%, 50%);
                    }*/

        .alert-box {
            padding: 4px;
            margin-bottom: 5px;
            border: 1px solid transparent;
            border-radius: 4px;
            width: 30% !important;
            float: right;
        }

        .success {
            color: black !important;
            background-color: #dff0d8;
            border-color: #d6e9c6;
            display: none;
        }

        .failure {
            color: black !important;
            background-color: #f2dede;
            border-color: #ebccd1;
            float: left;
            display: none;
        }

        .warning {
            color: #8a6d3b;
            background-color: #fcf8e3;
            border-color: #faebcc;
            display: none;
        }

        .ImportantFields {
            color: red;
        }

        /*#ATable, .ARow, .ACol {
            border: 1px solid black;
        }*/

        .ARow {
            background-color: @Session["Color"];
            color:white;
        }

        /*.ADCol {
            background-color: #F3F9F9;
        }*/
        .ui-autocomplete {
            padding: 0px;
        }
    </style>
</head>



<div class="container">
    <div class="row">
        <div class="col-md-6">
            <br />
            <h3>

                @{string LoaderNumber = Convert.ToString(@TempData["CurrentLoad"]);}
            </h3>
            @if (LoaderNumber != "")
            {
                <h4 style="color:#009efb">Load Number :  @LoaderNumber</h4>
            }


        </div>


    </div>
</div>

<div class="container">
    
    <div class="row">
        
        <div class="col-md-12">
            <div class="card-box">
                <!-- Nav tabs -->
                @*<ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#Section1" aria-controls="home" role="tab" data-toggle="tab">General</a></li>
            <li role="presentation"><a href="#Section2" aria-controls="profile" role="tab" data-toggle="tab">Pickup And Delivery</a></li>
            <li role="presentation"><a href="#Section3" aria-controls="messages" role="tab" data-toggle="tab">Charges</a></li>
            <li role="presentation"><a href="#Section4" aria-controls="messages" role="tab" data-toggle="tab">Text Message</a></li>
        </ul>*@
                <div class="row">
                    <div class="col-md-6">
                        <br />
                        <ul class="nav nav-tabs nav-tabs-solid">
                            <li class="nav-item"><a class="nav-link active" id="General" href="#Section1" data-toggle="tab">Pickups</a></li>
                            <li class="nav-item Pickup"><a class="nav-link " id="SectionPickup" href="#Section2" data-toggle="tab">Deliveries</a></li>

                            @*<li class="nav-item Charges"><a class="nav-link disabled" id="SectionCharges" href="#Charges" data-toggle="tab">Charges</a></li>*@
                        </ul>
                    </div>
                    <div class="col-md-6">
                        @if (ViewBag.AccessLevel == 2)
                        {

                            <strong>Agent List </strong>
                            <select style="width:50% !important" id="userid" required name="userid"
                                    onchange="ReloadList(this)" class="form-control js-example-basic-single">

                                @foreach (var item in ViewBag.AgentList)
                                {
                                    <text>
                                        @if (item.User_ID == ViewBag.UserId)
                                        {
                                            <option selected value="@item.User_ID">@item.UserName</option>
                                        }
                                        else
                                        {
                                            <option value="@item.User_ID">@item.UserName</option>
                                        }




                                    </text>
                                }
                            </select>
                        }
                    </div>
                </div>

                    <!-- Tab panes -->
                    <div class="tab-content tabs">



                        <div role="tabpanel" class="tab-pane show active" id="Section1">

                            <div class="row">


                                <div class="col-md-12">
                                    <div class="table-responsive" style="overflow: auto !important; max-height: 700px !important">

                                        <table style="font-size:11px;width:99.9%;" id="DailyPickups" class="table table-condensed table-fit table-sm table-striped tblTruck  g-dataTable   mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Load Number</th>
                                                    <th>Date</th>
                                                    <th>Address</th>

                                                </tr>
                                            </thead>
                                            <tbody>

                                                @foreach (var item in ViewBag.Pickups)
                                                {
                                                <tr>
                                                    <td>
                                                        <a id="" target="_blank" href="@Url.Action("ReportPreview", "Report", new { LoadNumberModel = @item.LoadNumber })" style="color: blue !important;" class=" ">
                                                            @item.LoadNumber
                                                        </a>
                                                    </td>
                                                    <td>@item.DateTimeFrom</td>
                                                    <td>@item.Address</td>

                                                </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="tab-pane fade" id="Section2">
                            <div class="row">


                                <div class="col-md-12">
                                    <div class="table-responsive" style="overflow: auto !important; max-height: 700px !important">

                                        <table style="font-size:11px;width:99.9%;" id="DailyDeliveries" class="table table-condensed table-fit table-sm table-striped tblTruck  g-dataTable   mb-0">
                                            <thead>
                                                <tr>
                                                    <th>Load Number</th>
                                                    <th>Date</th>
                                                    <th>Address</th>

                                                </tr>
                                            </thead>
                                            <tbody>

                                                @foreach (var item in ViewBag.Deliveries)
                                                {
                                                <tr>
                                                    <td>
                                                        <a id="" target="_blank" href="@Url.Action("ReportPreview", "Report", new { LoadNumberModel = @item.LoadNumber })" style="color: blue !important;"   class="">
                                                            @item.LoadNumber
                                                        </a>
                                                    </td>

                                                    <td>@item.DateTimeFrom</td>
                                                    <td>@item.Address</td>

                                                </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>


                    </div>

                    <br />

                </div>

            </div>

    </div>

</div>



@*<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>*@
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

<!-- Google Maps JavaScript library -->
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&callback=initMap&key=AIzaSyD-S-cuUziy083ZS2a2X_Btnr-msbXJFnw"></script>



@*<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>*@
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/themes/smoothness/jquery-ui.css" />
@*<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"></script>*@
<script type="text/javascript">

    function ReloadList(userid) {
        var agentId = userid.value;
        var Url = "@Url.Action("DailyPickUpAndDeliveries","Report",new { AgentId= "-1" })";
        Url = Url.replace("-1", agentId);
        //alert(Url);
        window.location = Url;
    }

    $(document).ready(function () {
        jQuery('#userid').select2();

        $('#DailyPickups').DataTable({

            order: [[1, 'desc']],
        });

        $('#DailyDeliveries').DataTable({

            order: [[1, 'desc']],
        });
        
    });


</script>